io:
  github:
    surezzzzzz:
      sdk:
        elasticsearch:
          route:
            enable: true
            default-source: primary

            sources:
              # primary 指向不存在的端口,如果路由错误会连接失败
              primary:
                urls: http://localhost:9201
                connect-timeout: 5000
                socket-timeout: 60000
                keep-alive-strategy: 300
                max-conn-total: 100
                max-conn-per-route: 10
                enable-connection-reuse: true

              # secondary 指向真实的 ES
              secondary:
                urls: http://localhost:9200
                connect-timeout: 5000
                socket-timeout: 60000
                keep-alive-strategy: 300
                max-conn-total: 100
                max-conn-per-route: 10
                enable-connection-reuse: true

            rules:
              # test_index_b.secondary 应该路由到 secondary (9200)
              - pattern: "test_index_b.secondary"
                datasource: secondary
                type: exact
                priority: 10
              # write_test_secondary 应该路由到 secondary (9200)
              - pattern: "write_test_secondary"
                datasource: secondary
                type: exact
                priority: 10
              # *.secondary 通配符规则
              - pattern: "*.secondary"
                datasource: secondary
                type: wildcard
                priority: 20

logging:
  level:
    io.github.surezzzzzz.sdk.elasticsearch.route: DEBUG
