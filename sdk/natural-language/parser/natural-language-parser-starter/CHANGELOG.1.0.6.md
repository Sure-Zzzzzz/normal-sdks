# v1.0.6 æ›´æ–°æ—¥å¿—

**å‘å¸ƒæ—¥æœŸï¼š** 2026-01-04

**ç±»å‹ï¼š** åŠŸèƒ½å¢å¼ºç‰ˆæœ¬

---

## âœ¨ æ–°åŠŸèƒ½

### Feature 1: search_after æ¸¸æ ‡å€¼è§£ææ”¯æŒ âœ…

**åŠŸèƒ½æè¿°ï¼š**

æ–°å¢å¯¹ Elasticsearch search_after æ¸¸æ ‡å€¼çš„è‡ªç„¶è¯­è¨€è§£ææ”¯æŒï¼Œç”¨æˆ·å¯ç›´æ¥åœ¨æŸ¥è¯¢ä¸­æŒ‡å®šæ¸¸æ ‡å€¼ã€‚

**æ”¯æŒæ ¼å¼ï¼š**

```
æ¥ç€[value1,value2,value3]ç»§ç»­æŸ¥è¯¢
```

**è§£æç»“æœï¼š**

```java
PaginationIntent(
  continueSearch = true,
  searchAfter = [value1, value2, value3]  // è‡ªåŠ¨è§£æç±»å‹
)
```

**æ™ºèƒ½ç±»å‹è¯†åˆ«ï¼š**

è§£æå™¨ä¼šè‡ªåŠ¨è¯†åˆ«å€¼çš„ç±»å‹ï¼š
- çº¯æ•°å­— â†’ è§£æä¸º `Long`
- æµ®ç‚¹æ•° â†’ è§£æä¸º `Double`
- å…¶ä»– â†’ ä¿æŒ `String`

**ç¤ºä¾‹ï¼š**

```
æŸ¥è¯¢ï¼šæ¥ç€[1704110400000,user_123,doc_456]ç»§ç»­æŸ¥è¯¢ï¼Œè¿”å›500æ¡

è§£æç»“æœï¼š
searchAfter = [1704110400000L, "user_123", "doc_456"]
continueSearch = true
limit = 500
```

**è®¾è®¡è€ƒé‡ï¼š**

- ä½¿ç”¨æ­£åˆ™åŒ¹é…æ–¹æ‹¬å·å†…å®¹ï¼š`\[([^\]]+)\]`
- æŒ‰é€—å·åˆ†å‰²å€¼åˆ—è¡¨
- æ™ºèƒ½ç±»å‹æ¨æ–­ï¼ˆLong â†’ Double â†’ Stringï¼‰
- æ”¯æŒä¸å…¶ä»–åˆ†é¡µå‚æ•°ç»„åˆä½¿ç”¨

**ä¿®æ”¹æ–‡ä»¶ï¼š**

- [PaginationParser.java](src/main/java/io/github/surezzzzzz/sdk/naturallanguage/parser/parser/PaginationParser.java) - æ·»åŠ  searchAfter è§£ææ”¯æŒ

---

## ğŸ”§ ä»£ç ä¼˜åŒ–

### ä¼˜åŒ– 1: PaginationParser ä»£ç é‡æ„ âœ…

**ä¼˜åŒ–å†…å®¹ï¼š**

1. **æå– `parseValue` æ–¹æ³•**ï¼šå°†æ•°å­—è§£æé€»è¾‘ï¼ˆLong â†’ Double â†’ Stringï¼‰å°è£…ä¸ºç‹¬ç«‹æ–¹æ³•ï¼Œæ¶ˆé™¤é‡å¤ä»£ç 
2. **ç®€åŒ– `reconstructText`**ï¼šä½¿ç”¨ Stream API æ›¿ä»£ StringBuilderï¼Œä»£ç æ›´ç®€æ´
3. **ä¼˜åŒ–å˜é‡å£°æ˜**ï¼š`searchAfter` ç›´æ¥åœ¨å£°æ˜æ—¶èµ‹å€¼ï¼Œå‡å°‘å†—ä½™

**å½±å“ï¼š** ä»£ç æ›´ä¼˜é›…ï¼Œå¯è¯»æ€§æå‡ï¼Œæ— åŠŸèƒ½å˜åŒ–ã€‚

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

**ä¿®æ”¹ï¼š**
- PaginationParser.java - æ·»åŠ  searchAfter è§£ææ”¯æŒï¼Œä»£ç ä¼˜åŒ–

---

## ğŸ”„ å‡çº§è¯´æ˜

**å…¼å®¹æ€§ï¼š** å®Œå…¨å‘åå…¼å®¹ v1.0.5ï¼Œæ— ç ´åæ€§å˜æ›´ã€‚

**å‡çº§æ–¹å¼ï¼š**

```gradle
dependencies {
    implementation 'io.github.sure-zzzzzz:natural-language-parser-starter:1.0.6'
}
```

**æ–°å¢èƒ½åŠ›ï¼š**

å¦‚éœ€ä½¿ç”¨ Elasticsearch search_after æ·±åº¦åˆ†é¡µï¼Œç°åœ¨å¯ä»¥ç›´æ¥åœ¨è‡ªç„¶è¯­è¨€ä¸­æŒ‡å®šæ¸¸æ ‡å€¼ï¼š

```java
// ä¹‹å‰ï¼ˆv1.0.5ï¼‰
"ç»§ç»­æŸ¥è¯¢ï¼Œè¿”å›500æ¡"
// åªèƒ½è®¾ç½® continueSearch=trueï¼ŒsearchAfter éœ€è¦æ‰‹åŠ¨è®¾ç½®

// ç°åœ¨ï¼ˆv1.0.6ï¼‰
"æ¥ç€[1704110400000,user_123]ç»§ç»­æŸ¥è¯¢ï¼Œè¿”å›500æ¡"
// continueSearch=true + searchAfter=[1704110400000L, "user_123"]
```

---

## ğŸ“Š å½±å“åˆ†æ

**æ–°åŠŸèƒ½å½±å“ï¼š**
- å—ç›Šç”¨æˆ·ï¼šä½¿ç”¨ Elasticsearch search_after çš„ç”¨æˆ·
- æ–°å¢èƒ½åŠ›ï¼šè‡ªç„¶è¯­è¨€æŒ‡å®šæ¸¸æ ‡å€¼
- å»ºè®®æ“ä½œï¼šå¯é€‰å‡çº§
